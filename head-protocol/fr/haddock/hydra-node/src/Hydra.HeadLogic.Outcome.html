<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DuplicateRecordFields #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hydra.HeadLogic.Outcome</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Hydra.Prelude</span></span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.API.ServerOutput.html"><span class="hs-identifier">Hydra.API.ServerOutput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.API.ServerOutput.html#ServerOutput"><span class="hs-identifier">ServerOutput</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Chain.html"><span class="hs-identifier">Hydra.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier">ChainStateType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Chain.html#HeadId"><span class="hs-identifier">HeadId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Chain.html#HeadParameters"><span class="hs-identifier">HeadParameters</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier">IsChainState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Chain.html#PostChainTx"><span class="hs-identifier">PostChainTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Crypto.html"><span class="hs-identifier">Hydra.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Crypto.html#MultiSignature"><span class="hs-identifier">MultiSignature</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Crypto.html#Signature"><span class="hs-identifier">Signature</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Error.html"><span class="hs-identifier">Hydra.HeadLogic.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Error.html#LogicError"><span class="hs-identifier">LogicError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.State.html"><span class="hs-identifier">Hydra.HeadLogic.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.State.html#HeadState"><span class="hs-identifier">HeadState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Ledger.html"><span class="hs-identifier">Hydra.Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#ChainSlot"><span class="hs-identifier">ChainSlot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier">IsTx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#TxIdType"><span class="hs-identifier">TxIdType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#UTxOType"><span class="hs-identifier">UTxOType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#ValidationError"><span class="hs-identifier">ValidationError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Network.Message.html"><span class="hs-identifier">Hydra.Network.Message</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Network.Message.html#Message"><span class="hs-identifier">Message</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Party.html"><span class="hs-identifier">Hydra.Party</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Party.html#Party"><span class="hs-identifier">Party</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html"><span class="hs-identifier">Hydra.Snapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier">Snapshot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#SnapshotNumber"><span class="hs-identifier">SnapshotNumber</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">-- | Analogous to events, the pure head logic &quot;core&quot; can have effects emited to</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- the &quot;shell&quot; layers and we distinguish the same: effects onto the client, the</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- network and the chain.</span><span>
</span><span id="line-21"></span><span id="local-6989586621680115371"><span id="local-6989586621680115372"></span></span><span class="hs-keyword">data</span><span> </span><span id="Effect"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-var">Effect</span></a></span></span><span> </span><span id="local-6989586621680117902"><span class="annot"><a href="#local-6989586621680117902"><span class="hs-identifier hs-type">tx</span></a></span></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Effect to be handled by the &quot;Hydra.API&quot;, results in sending this 'ServerOutput'.</span><span>
</span><span id="line-23"></span><span>    </span><span id="ClientEffect"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#ClientEffect"><span class="hs-identifier hs-var">ClientEffect</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AserverOutput%3AClientEffect"><span class="annot"><span class="annottext">forall tx. Effect tx -&gt; ServerOutput tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AserverOutput%3AClientEffect"><span class="hs-identifier hs-var hs-var">serverOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.API.ServerOutput.html#ServerOutput"><span class="hs-identifier hs-type">ServerOutput</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117902"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Effect to be handled by a &quot;Hydra.Network&quot;, results in a 'Hydra.Network.broadcast'.</span><span>
</span><span id="line-25"></span><span>    </span><span id="NetworkEffect"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#NetworkEffect"><span class="hs-identifier hs-var">NetworkEffect</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Amessage%3AClientEffect"><span class="annot"><span class="annottext">forall tx. Effect tx -&gt; Message tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Amessage%3AClientEffect"><span class="hs-identifier hs-var hs-var">message</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Network.Message.html#Message"><span class="hs-identifier hs-type">Message</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117902"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Effect to be handled by a &quot;Hydra.Chain&quot;, results in a 'Hydra.Chain.postTx'.</span><span>
</span><span id="line-27"></span><span>    </span><span id="OnChainEffect"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#OnChainEffect"><span class="hs-identifier hs-var">OnChainEffect</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3ApostChainTx%3AClientEffect"><span class="annot"><span class="annottext">forall tx. Effect tx -&gt; PostChainTx tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3ApostChainTx%3AClientEffect"><span class="hs-identifier hs-var hs-var">postChainTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#PostChainTx"><span class="hs-identifier hs-type">PostChainTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117902"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall tx x. Rep (Effect tx) x -&gt; Effect tx
forall tx x. Effect tx -&gt; Rep (Effect tx) x
$cto :: forall tx x. Rep (Effect tx) x -&gt; Effect tx
$cfrom :: forall tx x. Effect tx -&gt; Rep (Effect tx) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span id="local-6989586621680115352"><span id="local-6989586621680115360"><span id="local-6989586621680117890"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117890"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117890"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-31"></span><span id="local-6989586621680115335"><span id="local-6989586621680115337"><span id="local-6989586621680115349"><span id="local-6989586621680117884"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117884"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117884"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-32"></span><span id="local-6989586621680115326"><span id="local-6989586621680115328"><span id="local-6989586621680115330"><span id="local-6989586621680115332"><span id="local-6989586621680117881"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117881"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117881"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-33"></span><span id="local-6989586621680115321"><span id="local-6989586621680115323"><span id="local-6989586621680117878"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117878"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117878"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-36"></span><span>  </span><span id="local-6989586621680115317"><span id="local-6989586621680117875"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117875"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117875"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117875"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>  </span><span id="local-6989586621680115257"><span class="annot"><span class="annottext">arbitrary :: Gen (Effect tx)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">arbitrary</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Generic a, GA UnsizedOpts (Rep a),
 UniformWeight (Weights_ (Rep a))) =&gt;
Gen a
</span><span class="hs-identifier hs-var">genericArbitrary</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">-- | Head state changed event. These events represent all the internal state</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- changes, get persisted and processed in an event sourcing manner.</span><span>
</span><span id="line-45"></span><span id="local-6989586621680115253"><span id="local-6989586621680115254"></span></span><span class="hs-keyword">data</span><span> </span><span id="StateChanged"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-var">StateChanged</span></a></span></span><span> </span><span id="local-6989586621680117812"><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadInitialized"><span class="hs-identifier hs-var">HeadInitialized</span></a></span></span><span>
</span><span id="line-47"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparameters%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; HeadParameters
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aparameters%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">parameters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#HeadParameters"><span class="hs-identifier hs-type">HeadParameters</span></a></span><span>
</span><span id="line-48"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; ChainStateType tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-49"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AheadId%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; HeadId
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AheadId%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">headId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#HeadId"><span class="hs-identifier hs-type">HeadId</span></a></span><span>
</span><span id="line-50"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CommittedUTxO"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#CommittedUTxO"><span class="hs-identifier hs-var">CommittedUTxO</span></a></span></span><span>
</span><span id="line-52"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparty%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; Party
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aparty%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">party</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Party.html#Party"><span class="hs-identifier hs-type">Party</span></a></span><span>
</span><span id="line-53"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcommittedUTxO%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; UTxOType tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AcommittedUTxO%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">committedUTxO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#UTxOType"><span class="hs-identifier hs-type">UTxOType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-54"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-55"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HeadAborted"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadAborted"><span class="hs-identifier hs-var">HeadAborted</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HeadOpened"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadOpened"><span class="hs-identifier hs-var">HeadOpened</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3AinitialUTxO%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; UTxOType tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AinitialUTxO%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">initialUTxO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#UTxOType"><span class="hs-identifier hs-type">UTxOType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TransactionAppliedToLocalUTxO"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#TransactionAppliedToLocalUTxO"><span class="hs-identifier hs-var">TransactionAppliedToLocalUTxO</span></a></span></span><span>
</span><span id="line-59"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atx%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Atx%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnewLocalUTxO%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; UTxOType tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AnewLocalUTxO%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">newLocalUTxO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#UTxOType"><span class="hs-identifier hs-type">UTxOType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-61"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SnapshotRequestDecided"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#SnapshotRequestDecided"><span class="hs-identifier hs-var">SnapshotRequestDecided</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AsnapshotNumber%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; SnapshotNumber
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AsnapshotNumber%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">snapshotNumber</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#SnapshotNumber"><span class="hs-identifier hs-type">SnapshotNumber</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | A snapshot was requested by some party.</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-comment">-- NOTE: We deliberately already include an updated local ledger state to</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-comment">-- not need a ledger to interpret this event.</span><span>
</span><span id="line-66"></span><span>    </span><span id="SnapshotRequested"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#SnapshotRequested"><span class="hs-identifier hs-var">SnapshotRequested</span></a></span></span><span>
</span><span id="line-67"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asnapshot%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; Snapshot tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Asnapshot%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">snapshot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier hs-type">Snapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-68"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3ArequestedTxIds%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; [TxIdType tx]
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3ArequestedTxIds%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">requestedTxIds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hydra.Ledger.html#TxIdType"><span class="hs-identifier hs-type">TxIdType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnewLocalUTxO%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AnewLocalUTxO%3AHeadInitialized"><span class="hs-identifier hs-var">newLocalUTxO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#UTxOType"><span class="hs-identifier hs-type">UTxOType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span>
</span><span id="line-70"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AnewLocalTxs%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; [tx]
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AnewLocalTxs%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">newLocalTxs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-71"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TransactionReceived"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#TransactionReceived"><span class="hs-identifier hs-var">TransactionReceived</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Atx%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Atx%3AHeadInitialized"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PartySignedSnapshot"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#PartySignedSnapshot"><span class="hs-identifier hs-var">PartySignedSnapshot</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Asnapshot%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Asnapshot%3AHeadInitialized"><span class="hs-identifier hs-var">snapshot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier hs-type">Snapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aparty%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aparty%3AHeadInitialized"><span class="hs-identifier hs-var">party</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Party.html#Party"><span class="hs-identifier hs-type">Party</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Asignature%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; Signature (Snapshot tx)
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Asignature%3AHeadInitialized"><span class="hs-keyword hs-var hs-var">signature</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Crypto.html#Signature"><span class="hs-identifier hs-type">Signature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier hs-type">Snapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SnapshotConfirmed"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#SnapshotConfirmed"><span class="hs-identifier hs-var">SnapshotConfirmed</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Asnapshot%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Asnapshot%3AHeadInitialized"><span class="hs-identifier hs-var">snapshot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier hs-type">Snapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Asignatures%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; MultiSignature (Snapshot tx)
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Asignatures%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">signatures</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Crypto.html#MultiSignature"><span class="hs-identifier hs-type">MultiSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Snapshot.html#Snapshot"><span class="hs-identifier hs-type">Snapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HeadClosed"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadClosed"><span class="hs-identifier hs-var">HeadClosed</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3AcontestationDeadline%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; UTCTime
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AcontestationDeadline%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">contestationDeadline</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTCTime</span></span><span class="hs-special">}</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HeadIsReadyToFanout"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadIsReadyToFanout"><span class="hs-identifier hs-var">HeadIsReadyToFanout</span></a></span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HeadFannedOut"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#HeadFannedOut"><span class="hs-identifier hs-var">HeadFannedOut</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ChainRolledBack"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#ChainRolledBack"><span class="hs-identifier hs-var">ChainRolledBack</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainState%3AHeadInitialized"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainState%3AHeadInitialized"><span class="hs-identifier hs-var">chainState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117812"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TickObserved"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#TickObserved"><span class="hs-identifier hs-var">TickObserved</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AchainSlot%3AHeadInitialized"><span class="annot"><span class="annottext">forall tx. StateChanged tx -&gt; ChainSlot
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AchainSlot%3AHeadInitialized"><span class="hs-identifier hs-var hs-var">chainSlot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#ChainSlot"><span class="hs-identifier hs-type">ChainSlot</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall tx x. Rep (StateChanged tx) x -&gt; StateChanged tx
forall tx x. StateChanged tx -&gt; Rep (StateChanged tx) x
$cto :: forall tx x. Rep (StateChanged tx) x -&gt; StateChanged tx
$cfrom :: forall tx x. StateChanged tx -&gt; Rep (StateChanged tx) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680115217"><span id="local-6989586621680117795"><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117795"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.State.html#HeadState"><span class="hs-identifier hs-type">HeadState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117795"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117795"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117795"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621680114882"><span class="annot"><span class="annottext">arbitrary :: Gen (StateChanged tx)
</span><a href="#local-6989586621680114882"><span class="hs-identifier hs-var hs-var hs-var hs-var">arbitrary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Generic a, GA UnsizedOpts (Rep a),
 UniformWeight (Weights_ (Rep a))) =&gt;
Gen a
</span><span class="hs-identifier hs-var">genericArbitrary</span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621680114841"><span id="local-6989586621680114880"><span id="local-6989586621680117772"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117772"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.State.html#HeadState"><span class="hs-identifier hs-type">HeadState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117772"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117772"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117772"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-86"></span><span id="local-6989586621680114784"><span id="local-6989586621680114786"><span id="local-6989586621680114839"><span id="local-6989586621680117767"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117767"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.State.html#HeadState"><span class="hs-identifier hs-type">HeadState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117767"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117767"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117767"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-87"></span><span id="local-6989586621680114776"><span id="local-6989586621680114778"><span id="local-6989586621680114780"><span id="local-6989586621680114782"><span id="local-6989586621680117766"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117766"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117766"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117766"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-88"></span><span id="local-6989586621680114772"><span id="local-6989586621680114774"><span id="local-6989586621680117765"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117765"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.State.html#HeadState"><span class="hs-identifier hs-type">HeadState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117765"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117765"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117765"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621680114770"><span id="local-6989586621680114771"></span></span><span class="hs-keyword">data</span><span> </span><span id="Outcome"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-var">Outcome</span></a></span></span><span> </span><span id="local-6989586621680117763"><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Effects"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effects"><span class="hs-identifier hs-var">Effects</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aeffects%3AEffects"><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; [Effect tx]
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aeffects%3AEffects"><span class="hs-identifier hs-var hs-var">effects</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="StateChanged"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-var">StateChanged</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Wait"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Wait"><span class="hs-identifier hs-var">Wait</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Areason%3AEffects"><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; WaitReason tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Areason%3AEffects"><span class="hs-identifier hs-var hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Error"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Error"><span class="hs-identifier hs-var">Error</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aerror%3AEffects"><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; LogicError tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aerror%3AEffects"><span class="hs-identifier hs-var hs-var">error</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Error.html#LogicError"><span class="hs-identifier hs-type">LogicError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Combined"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Combined"><span class="hs-identifier hs-var">Combined</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aleft%3AEffects"><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; Outcome tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aleft%3AEffects"><span class="hs-identifier hs-var hs-var">left</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aright%3AEffects"><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; Outcome tx
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3Aright%3AEffects"><span class="hs-identifier hs-var hs-var">right</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117763"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall tx x. Rep (Outcome tx) x -&gt; Outcome tx
forall tx x. Outcome tx -&gt; Rep (Outcome tx) x
$cto :: forall tx x. Rep (Outcome tx) x -&gt; Outcome tx
$cfrom :: forall tx x. Outcome tx -&gt; Rep (Outcome tx) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680114753"><span id="local-6989586621680114755"><span id="local-6989586621680117755"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117755"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>  </span><span id="local-6989586621680114751"><span class="annot"><span class="annottext">&lt;&gt; :: Outcome tx -&gt; Outcome tx -&gt; Outcome tx
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; Outcome tx -&gt; Outcome tx
</span><a href="Hydra.HeadLogic.Outcome.html#Combined"><span class="hs-identifier hs-var">Combined</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="local-6989586621680114736"><span id="local-6989586621680114749"><span id="local-6989586621680117749"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117749"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117749"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-102"></span><span id="local-6989586621680114711"><span id="local-6989586621680114713"><span id="local-6989586621680114731"><span id="local-6989586621680117743"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117743"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117743"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-103"></span><span id="local-6989586621680114700"><span id="local-6989586621680114702"><span id="local-6989586621680114704"><span id="local-6989586621680114706"><span id="local-6989586621680117742"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117742"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117742"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-104"></span><span id="local-6989586621680114696"><span id="local-6989586621680114698"><span id="local-6989586621680117741"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#IsChainState"><span class="hs-identifier hs-type">IsChainState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117741"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117741"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680114693"><span id="local-6989586621680117740"><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117740"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Chain.html#ChainStateType"><span class="hs-identifier hs-type">ChainStateType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117740"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117740"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621680114602"><span class="annot"><span class="annottext">arbitrary :: Gen (Outcome tx)
</span><a href="#local-6989586621680114602"><span class="hs-identifier hs-var hs-var hs-var hs-var">arbitrary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Generic a, GA UnsizedOpts (Rep a),
 UniformWeight (Weights_ (Rep a))) =&gt;
Gen a
</span><span class="hs-identifier hs-var">genericArbitrary</span></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span id="local-6989586621680114601"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#collectEffects"><span class="hs-identifier hs-type">collectEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680114601"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680114601"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-110"></span><span id="collectEffects"><span class="annot"><span class="annottext">collectEffects :: forall tx. Outcome tx -&gt; [Effect tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectEffects"><span class="hs-identifier hs-var hs-var">collectEffects</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Error"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><span class="annottext">LogicError tx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Wait"><span class="hs-identifier hs-type">Wait</span></a></span><span> </span><span class="annot"><span class="annottext">WaitReason tx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><span class="annottext">StateChanged tx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effects"><span class="hs-identifier hs-type">Effects</span></a></span><span> </span><span id="local-6989586621680114597"><span class="annot"><span class="annottext">[Effect tx]
</span><a href="#local-6989586621680114597"><span class="hs-identifier hs-var">effs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Effect tx]
</span><a href="#local-6989586621680114597"><span class="hs-identifier hs-var">effs</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Combined"><span class="hs-identifier hs-type">Combined</span></a></span><span> </span><span id="local-6989586621680114596"><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114596"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680114595"><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114595"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; [Effect tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectEffects"><span class="hs-identifier hs-var">collectEffects</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114596"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; [Effect tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectEffects"><span class="hs-identifier hs-var">collectEffects</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114595"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span id="local-6989586621680117732"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#collectWaits"><span class="hs-identifier hs-type">collectWaits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Outcome"><span class="hs-identifier hs-type">Outcome</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117732"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117732"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-118"></span><span id="collectWaits"><span class="annot"><span class="annottext">collectWaits :: forall tx. Outcome tx -&gt; [WaitReason tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectWaits"><span class="hs-identifier hs-var hs-var">collectWaits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Error"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><span class="annottext">LogicError tx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Wait"><span class="hs-identifier hs-type">Wait</span></a></span><span> </span><span id="local-6989586621680114592"><span class="annot"><span class="annottext">WaitReason tx
</span><a href="#local-6989586621680114592"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WaitReason tx
</span><a href="#local-6989586621680114592"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#StateChanged"><span class="hs-identifier hs-type">StateChanged</span></a></span><span> </span><span class="annot"><span class="annottext">StateChanged tx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Effects"><span class="hs-identifier hs-type">Effects</span></a></span><span> </span><span class="annot"><span class="annottext">[Effect tx]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#Combined"><span class="hs-identifier hs-type">Combined</span></a></span><span> </span><span id="local-6989586621680114591"><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114591"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621680114590"><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114590"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; [WaitReason tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectWaits"><span class="hs-identifier hs-var">collectWaits</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114591"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall tx. Outcome tx -&gt; [WaitReason tx]
</span><a href="Hydra.HeadLogic.Outcome.html#collectWaits"><span class="hs-identifier hs-var">collectWaits</span></a></span><span> </span><span class="annot"><span class="annottext">Outcome tx
</span><a href="#local-6989586621680114590"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span id="local-6989586621680114588"><span id="local-6989586621680114589"></span></span><span class="hs-keyword">data</span><span> </span><span id="WaitReason"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-var">WaitReason</span></a></span></span><span> </span><span id="local-6989586621680117729"><span class="annot"><a href="#local-6989586621680117729"><span class="hs-identifier hs-type">tx</span></a></span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WaitOnNotApplicableTx"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitOnNotApplicableTx"><span class="hs-identifier hs-var">WaitOnNotApplicableTx</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AvalidationError%3AWaitOnNotApplicableTx"><span class="annot"><span class="annottext">forall tx. WaitReason tx -&gt; ValidationError
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AvalidationError%3AWaitOnNotApplicableTx"><span class="hs-identifier hs-var hs-var">validationError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Ledger.html#ValidationError"><span class="hs-identifier hs-type">ValidationError</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WaitOnSnapshotNumber"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitOnSnapshotNumber"><span class="hs-identifier hs-var">WaitOnSnapshotNumber</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AwaitingFor%3AWaitOnNotApplicableTx"><span class="annot"><span class="annottext">forall tx. WaitReason tx -&gt; SnapshotNumber
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AwaitingFor%3AWaitOnNotApplicableTx"><span class="hs-identifier hs-var hs-var">waitingFor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hydra.Snapshot.html#SnapshotNumber"><span class="hs-identifier hs-type">SnapshotNumber</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WaitOnSeenSnapshot"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitOnSeenSnapshot"><span class="hs-identifier hs-var">WaitOnSeenSnapshot</span></a></span></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WaitOnTxs"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitOnTxs"><span class="hs-identifier hs-var">WaitOnTxs</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AwaitingForTxIds%3AWaitOnNotApplicableTx"><span class="annot"><span class="annottext">forall tx. WaitReason tx -&gt; [TxIdType tx]
</span><a href="Hydra.HeadLogic.Outcome.html#%24sel%3AwaitingForTxIds%3AWaitOnNotApplicableTx"><span class="hs-identifier hs-var hs-var">waitingForTxIds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hydra.Ledger.html#TxIdType"><span class="hs-identifier hs-type">TxIdType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117729"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WaitOnContestationDeadline"><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitOnContestationDeadline"><span class="hs-identifier hs-var">WaitOnContestationDeadline</span></a></span></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall tx x. Rep (WaitReason tx) x -&gt; WaitReason tx
forall tx x. WaitReason tx -&gt; Rep (WaitReason tx) x
$cto :: forall tx x. Rep (WaitReason tx) x -&gt; WaitReason tx
$cfrom :: forall tx x. WaitReason tx -&gt; Rep (WaitReason tx) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span id="local-6989586621680114570"><span id="local-6989586621680114576"><span id="local-6989586621680117750"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117750"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117750"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-134"></span><span id="local-6989586621680114557"><span id="local-6989586621680114559"><span id="local-6989586621680114568"><span id="local-6989586621680117744"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117744"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117744"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-135"></span><span id="local-6989586621680114549"><span id="local-6989586621680114551"><span id="local-6989586621680114553"><span id="local-6989586621680114555"><span id="local-6989586621680117725"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117725"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117725"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-136"></span><span id="local-6989586621680114545"><span id="local-6989586621680114547"><span id="local-6989586621680117724"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117724"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117724"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680114542"><span id="local-6989586621680117735"><span class="annot"><a href="Hydra.Ledger.html#IsTx"><span class="hs-identifier hs-type">IsTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117735"><span class="hs-identifier hs-type">tx</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Arbitrary</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.HeadLogic.Outcome.html#WaitReason"><span class="hs-identifier hs-type">WaitReason</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680117735"><span class="hs-identifier hs-type">tx</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621680114481"><span class="annot"><span class="annottext">arbitrary :: Gen (WaitReason tx)
</span><a href="#local-6989586621680114481"><span class="hs-identifier hs-var hs-var hs-var hs-var">arbitrary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Generic a, GA UnsizedOpts (Rep a),
 UniformWeight (Weights_ (Rep a))) =&gt;
Gen a
</span><span class="hs-identifier hs-var">genericArbitrary</span></span><span>
</span><span id="line-140"></span></pre></body></html>